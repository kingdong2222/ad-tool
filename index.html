<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Ad form</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <meta name="description" content="description here">
    <meta name="format-detection" content="telephone=no">
    <meta name="author" content="Lam Nguyen">
    <meta name="copyright" content="2018 Lam Nguyen">
    <meta name="robots" content="index, follow">
    <meta name="revisit-after" content="7 days">
    <meta property="og:url" content="">
    <meta property="og:title" content="">
    <meta property="og:image" content="">
    <link rel="icon" type="image/ico" href="images/favicon.ico">
    <!--link(href="css/animate.min.css" rel="stylesheet" type="text/css")-->
    <link href="css/layout.css" rel="stylesheet" type="text/css">
    <style></style>
  </head>
  <body>
    <div class="layer-loading">
      <div class="lds-ring">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
    <div class="page-content has-cover-fixed">
      <div class="bl-cover"><span class="img-cover" style="background-image:url(images/zad_game_header.jpg)"></span></div>
      <div class="body">
        <div class="group-form">
          <div class="bl-info-oa">
            <div class="avatar avatar--s">
              <div class="avatar-img" style="background-image:url(images/zad_OA_banner_avatar.png)"></div>
            </div>
            <h1>Zalo Ads</h1>
          </div>
          <div class="bl-form">
            <h2 class="title has-text-centered">Hỗ trợ duyệt quảng cáo</h2>
            <div class="subtitle">
              <div class="js-read-more" data-rm-words="47"><span>
                  Kính gửi Quý khách hàng,<br>Nếu quảng cáo của bạn đang được xử lý lâu hơn thời gian cam kết của Zalo Ads (trong vòng 60 phút), bạn vui lòng nhập thông tin theo yêu cầu bên dưới để được xử lý nhanh hơn.<br>Zalo Ads sẽ xử lý quảng cáo của bạn theo cơ chế như sau:
                  <br>+ Bắt buộc là ID quảng cáo, không được dùng ID chiến dịch.
                  <br>+ Số điên thoại đăng ký tài khoản quảng cáo phải sở hữu ID quảng cáo được đề cập.
                  <br>+ Quảng cáo chưa Chờ duyệt đủ 60 phút thì vẫn sẽ chờ đủ 60 phút mới được xử lý (nếu vẫn trong trạng thái Chờ duyệt).
                  <br>+ Tài khoản quảng cáo chưa vi phạm chính sách Cộng đồng trước đó.
                  <br>Quảng cáo sẽ được xử lý trong vòng 10 phút kể từ khi thông tin được gửi đi, kết quả quảng cáo của bạn có thể được Duyệt hoặc Bị từ chối.
                  <br>Mọi khi tiết thắc mắc, bạn vui lòng liên hệ trực tiếp:
                  <br>- Hotline: <a href="tel:1900 988 912">1900 988 912</a>
                  <br>- Email: <a href="mailto:ads@zalo.me">ads@zalo.me</a></span></div>
            </div>
            <div class="field">
              <label class="label">ID quảng cáo cần hỗ trợ duyệt<a class="func-tooltip func-tooltip-1" href="javascript:void(0);"><i class="icz icz-fill-info"></i></a></label>
              <div class="control has-icons-right">
                <input class="input" id="id-ad" type="tel" placeholder="VD: 13958140" value="" maxlength="10">
              </div>
            </div>
            <div class="field">
              <label class="label">Số điện thoại tài khoản quảng cáo<span class="fs--s color-grey-light ml-1">(10 số)</span><a class="func-tooltip func-tooltip-2" href="javascript:void(0);"><i class="icz icz-fill-info"></i></a></label>
              <div class="control has-icons-right">
                <input class="input" id="mobile" type="tel" placeholder="VD: 0901239876" value="" maxlength="10">
              </div>
            </div>
            <div class="field">
              <label class="label">Thời gian gửi duyệt quảng cáo</label>
              <div class="control has-icons-right">
                <input class="input js-date-picker" id="datetime_ad" type="text" placeholder="Chọn thời gian gửi duyệt" value="">
                <div class="icon is-small is-right"><i class="icz icz-fill-calendar"></i></div>
              </div>
            </div>
            <button class="button is-primary is-large is-fullwidth" id="submit-form">Gửi thông tin</button>
            <p class="copyright">Powered by Zalo Ads</p>
          </div>
        </div>
      </div>
    </div>
    <div class="bl-tooltip">
      <div class="tooltip-container" id="tooltip-1">
        <div class="bl-tooltip-heading"><span>Giới thiệu về Thông tin điền trước</span><a class="func-close-tooltip" href="javascript:void(0)"><i class="icz icz-close"></i></a></div>
        <div class="bl-tooltip-context">
          <p>Thông tin được điền trước trong mẫu giúp bạn dễ dàng kết nối hơn với nhà quảng cáo, có thể lấy từ:</p>
          <ul>
            <li>Thông tin tài khoản Zalo của bạn.</li>
            <li>Mẫu đã hoàn tất trước đó của bạn.</li>
          </ul>
          <p>Nhà quảng cáo chỉ biết thông tin liên hệ của bạn sau khi bạn hoàn tất việc gửi mẫu.</p>
        </div>
      </div>
      <div class="tooltip-container" id="tooltip-id-ad">
        <div class="bl-tooltip-heading"><span>ID quảng cáo cần hỗ trợ duyệt</span><a class="func-close-tooltip" href="javascript:void(0)"><i class="icz icz-close"></i></a></div>
        <div class="bl-tooltip-context">
          <p>Link quảng cáo có dạng <span>https://ads.zalo.me/client/ads/detail/13958140</span>. </p>
          <p>ID quảng cáo là: <span><strong>13958140</strong></span>.</p>
          <p>Quý đối tác lưu ý link quảng cáo có chữ <i>campaign</i> là ID của chiến dịch <span>https://ads.zalo.me/client/campaigns/detail/3469651</span>.</p>
          <p>KHÔNG SUBMIT ID 3469651. </p>
          <p>Chỉ điền <strong>SỐ</strong>, <strong>KHÔNG</strong> điền link.</p>
        </div>
      </div>
      <div class="tooltip-container" id="tooltip-phone">
        <div class="bl-tooltip-heading"><span>Số điện thoại tài khoản quảng cáo</span><a class="func-close-tooltip" href="javascript:void(0)"><i class="icz icz-close"></i></a></div>
        <div class="bl-tooltip-context">
          <p>Số điện thoại (gồm 10 số) đang thực hiện chiến dịch quảng cáo được submit ID quảng cáo tương ứng.</p>
          <p>Không khoảng cách, số 0 đứng đầu tiên.</p>
        </div>
      </div>
      <div class="tooltip-container" id="tooltip-2">
        <div class="bl-tooltip-heading"><span>Về dịch vụ này</span><a class="func-close-tooltip" href="javascript:void(0)"><i class="icz icz-close"></i></a></div>
        <div class="bl-tooltip-context">
          <p>Nhà quảng cáo có thể liên hệ với bạn thông qua cuộc gọi thoại trên Zalo. Điều này chỉ diễn ra nếu bạn cho phép bằng việc nhấn nút Đồng ý.</p>
          <p>Diễn giải thêm về policy tại đây. Lợi thế so với phone là không bị leak số phone</p>
          <p>Xem thêm <a href="#!" target="_blank">quy định về quảng cáo</a> của Zalo Form</p>
        </div>
      </div>
      <div class="tooltip-container" id="tooltip-close">
        <div class="bl-tooltip-heading"><span>Bạn muốn rời Zalo Form?</span><a class="func-close-tooltip" href="javascript:void(0)"><i class="icz icz-close"></i></a></div>
        <div class="bl-tooltip-context">
          <p class="mb-3">Các thông tin đã điền sẽ bị xoá nếu bạn rời Zalo Form mà chưa Gửi thông tin.</p><a class="button is-primary is-light is-large is-fullwidth mb-2" href="#!">Rời Zalo Form</a><a class="button is-primary is-outlined is-large is-fullwidth" href="#!">Ở lại Zalo Form</a>
        </div>
      </div>
    </div>
    <div class="bl-modal">
    </div>
    <div class="bl-popup">
    </div>
    <!-- Include Plugin-->
    <script src="js/jquery.min.js"></script>
    <script src="js/picker.js"></script>
    <script>
      $(".func-tooltip-1").click(function(){
      	$("body").addClass("overlay-tooltip");
      	$("#tooltip-id-ad").addClass("is-show");
      });
      $(".func-tooltip-2").click(function(){
      	$("body").addClass("overlay-tooltip");
      	$("#tooltip-phone").addClass("is-show");
      });
      
      $(".func-close-tooltip").click(function(){
      	$("body").removeClass("overlay-tooltip");
      	$(".tooltip-container").removeClass("is-show");
      });
      new Picker(document.querySelector('.js-date-picker'),{
      	format: 'D/MM/YYYY HH:mm',
      	text: {
      		title: 'Quảng cáo được gửi duyệt vào lúc',
      	}
      });
      
      //- tắt loading[test]
      setTimeout(function(){$('.layer-loading').removeClass("is-active")},1000)
      
      /* Read More JS */
      const ReadMore = (() => {
      let s;
      
      return {
      	settings() {
      	return {
      		content: document.querySelectorAll('.js-read-more'),
      		originalContentArr: [],
      		truncatedContentArr: [],
      		moreLink: "Xem thêm",
      		lessLink: "Thu gọn",
      	}
      	},
      
      	init() {
      	s = this.settings();
      	this.bindEvents();
      	},
      
      	bindEvents() {
      	ReadMore.truncateText();
      	},
      
      	/**
      	* Count Words
      	* Helper to handle word count.
      	* @param {string} str - Target content string.
      	*/
      	countWords(str) {
      	return str.split(/\s+/).length;
      	},
      
      	/**
      	* Ellpise Content
      	* @param {string} str - content string.
      	* @param {number} wordsNum - Number of words to show before truncation.
      	*/
      	ellipseContent(str, wordsNum) {
      	return str.split(/\s+/).slice(0, wordsNum).join(' ') + '...';
      	},
      
      	truncateText() {
      
      	for (let i = 0; i < s.content.length; i++) {
      		//console.log(s.content)
      		const originalContent = s.content[i].innerHTML;
      		const numberOfWords = s.content[i].dataset.rmWords;
      		const truncateContent = ReadMore.ellipseContent(originalContent, numberOfWords);
      		const originalContentWords = ReadMore.countWords(originalContent);
      
      		s.originalContentArr.push(originalContent);
      		s.truncatedContentArr.push(truncateContent);
      
      		if (numberOfWords < originalContentWords) {
      		s.content[i].innerHTML = s.truncatedContentArr[i];
      		let self = i;
      		ReadMore.createLink(self)
      		}
      	}
      	ReadMore.handleClick(s.content);
      	},
      
      	/**
      	* Create Link
      	* Creates and Inserts Read More Link
      	* @param {number} index - index reference of looped item
      	*/
      	createLink(index) {
      	const linkWrap = document.createElement('span');
      
      	linkWrap.className = 'read-more-link-wrap';
      
      	linkWrap.innerHTML = `<a id="read-more_${index}"
      								class="read-more-link"
      								style="cursor:pointer;">
      								${s.moreLink}
      							</a>`;
      
      	// Inset created link
      	s.content[index].parentNode.insertBefore(linkWrap, s.content[index].nextSibling);
      
      	},
      
      	/**
      	* Handle Click
      	* Toggle Click eve
      	*/
      	handleClick(el) {
      	const readMoreLink = document.querySelectorAll('.read-more-link');
      
      	for (let j = 0, l = readMoreLink.length; j < l; j++) {
      
      		readMoreLink[j].addEventListener('click', function() {
      
      		const moreLinkID = this.getAttribute('id');
      		let index = moreLinkID.split('_')[1];
      
      		el[index].classList.toggle('is-expanded');
      
      		if (this.dataset.clicked !== 'true') {
      			el[index].innerHTML = s.originalContentArr[index];
      			this.innerHTML = s.lessLink;
      			this.dataset.clicked = true;
      		} else {
      			el[index].innerHTML = s.truncatedContentArr[index];
      			this.innerHTML = s.moreLink;
      			this.dataset.clicked = false;
      		}
      		});
      	}
      	},
      
      	/**
      	* Open All
      	* Method to expand all instances on the page.
      	* Will probably be useful with a destroy method.
      	*/
      	openAll() {
      	const instances = document.querySelectorAll('.read-more-link');
      		for (let i = 0; i < instances.length; i++) {
      		content[i].innerHTML = s.truncatedContentArr[i];
      		instances[i].innerHTML = s.moreLink;
      		}
      	}
      	}
      })();
      //export default ReadMore;
      ReadMore.init();
      
      let id_ad = document.getElementById('id-ad')
      let mobile = document.getElementById('mobile')
      let date_ad = document.getElementById('datetime_ad')
      
      let empty_id = 'Vui lòng nhập ID quảng cáo cần hỗ trợ duyệt'
      let empty_mobile = 'Vui lòng nhập Số điện thoại tài khoản quảng cáo'
      let empty_date = 'Vui lòng chọn Thời gian gửi duyệt quảng cáo'
      let wrong_mobile = 'Số điện thoại không hợp lệ'
      
      $('#submit-form').click(() => {
      	// window.location = 'welcome.html'
      	validateFunc()
      })
      
      let validateFunc = () => {
      	$("#submit-form").attr("disabled", "disabled")
      	$('#submit-form').addClass('loading')
      	setTimeout(() => {
      		if (id_ad.value) {
      			if (mobile.value) {
      				if (mobile.value.length >= 9) {
      					if (date_ad.value) {
      						postToGG(id_ad.value,mobile.value,date_ad.value)
      					} else {
      						alert(empty_date)
      						$("#submit-form").attr("disabled", false)
      						$('#submit-form').removeClass('loading')
      					}
      				} else {
      					alert(wrong_mobile)
      					$("#submit-form").attr("disabled", false)
      					$('#submit-form').removeClass('loading')
      				}
      			} else {
      				alert(empty_mobile)
      				$("#submit-form").attr("disabled", false)
      				$('#submit-form').removeClass('loading')
      			}
      		} else {
      			alert(empty_id)
      			$("#submit-form").attr("disabled", false)
      			$('#submit-form').removeClass('loading')
      		}
      	},500)
      }
      
      let postToGG = (id, mobile, datetime) => {
      	$.ajax({
      		url: "https://docs.google.com/forms/d/e/1FAIpQLScwpsHeMVQEUcaBWdTZWNsMQBAhfw6khEpcHV4sGbfXEaam5A/formResponse?",
      		data: { "entry.1650827513": id, "entry.1311280625": mobile, "entry.850776665": datetime},
      		type: "POST",
      		dataType: "jsonp",
      		success: function (d) {
      			console.log('success')
      			$('#submit-form').removeClass('loading')
      			window.location = 'thankyou.html'
      		},
      		error: function (x, y, z) {
      			console.log('error')
      			$('#submit-form').removeClass('loading')
      			window.location = 'thankyou.html'
      		}
      	});
      }
    </script>
  </body>
</html>